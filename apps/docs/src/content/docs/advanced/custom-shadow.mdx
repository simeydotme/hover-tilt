---
title: Custom Shadow
description: Override the dynamic shadow with your own shadow implementation while keeping pointer tracking.
---

import { Tabs, TabItem, Code, Steps, Aside } from '@astrojs/starlight/components';
import CustomShadowDemo from '@components/demos/advanced/CustomShadowDemo.svelte';
import CustomShadowNeonDemo from '@components/demos/advanced/CustomShadowNeonDemo.svelte';
import { cssShadowSyntax, cssShadowOpacitySyntax } from './custom-shadow.strings';
import { simpleShadowSvelte, simpleShadowWebComponent, neonShadowSvelte, neonShadowWebComponent } from './custom-shadow.strings';
import { steps3Svelte, steps3WebComponent, steps4Svelte, steps4WebComponent } from './custom-shadow.strings';
import PropTable from '@components/astro/PropTable.astro';


When the `shadow` prop is enabled, `<HoverTilt />` sets `box-shadow` on the tilt element using two CSS variables:

- `--hover-tilt-custom-shadow` (optional override for anything you want)
- `--hover-tilt-default-shadow` (fallback to the default drop shadow)

**The shadow CSS looks something like this;**

```css
.hover-tilt-container {
  --shadow-x: calc(var(--hover-tilt-x, 0.5) - 0.5); /* center the shadow horizontally */
  --shadow-y: calc(var(--hover-tilt-y, 0.5) - 0.5); /* center the shadow vertically */
}

.hover-tilt-shadow {
  --hover-tilt-default-shadow:
    calc(var(--shadow-x) * var(--shadow-blur-1))
      calc(var(--shadow-y) * var(--shadow-blur-1) / 2 + var(--shadow-blur-1) / 4) calc(var(--shadow-blur-1) / 2)
      calc(var(--shadow-blur-1) * -0.25) lch(0% 0 0 / calc(var(--hover-tilt-opacity, 0) * 0.125)),
    calc(var(--shadow-x) * var(--shadow-blur-2))
      calc(var(--shadow-y) * var(--shadow-blur-2) / 2 + var(--shadow-blur-2) / 4) calc(var(--shadow-blur-2) / 2)
      calc(var(--shadow-blur-2) * -0.25) lch(0% 0 0 / calc(var(--hover-tilt-opacity, 0) * 0.125));

  /* we look for a custom shadow first, falling back to the default shadow */
  box-shadow: var(--hover-tilt-custom-shadow, var(--hover-tilt-default-shadow));
}
```

`--shadow-x` and `--shadow-y` are used to center the shadow horizontally and vertically, and available
to use in your custom shadow implementation to multiply the x/y shadow offsets with `calc()`. These values update
as the pointer moves and the component tilts.

### Crafting a custom Dynamic Shadow

The steps for overriding the built-in dynamic shadow are;

<Steps>

1. Enable `shadow` so the container emits the necessary CSS variables.

2. Write your desired shadow code using CSS `calc()` with `var(--shadow-x)` / `var(--shadow-y)`. _(see below)_

3. Assign it to `--hover-tilt-custom-shadow` through a CSS class.

</Steps>

## Examples

<Tabs syncKey="custom-shadow">
  <TabItem label="Simple">
    <CustomShadowDemo client:only="svelte" />
  </TabItem>
  <TabItem label="Neon">
    <CustomShadowNeonDemo client:only="svelte" />
  </TabItem>
</Tabs>

### Code

The key **difference between the Svelte and Web Component** examples is the selector used to target the custom shadow.
In **Svelte the `:global()` selector is needed** to access the container, while in the **Web Component the `::part(container)` selector is used**.

<Tabs syncKey="custom-shadow">
  <TabItem label="Simple">
    <div class="ml-4">
      <Tabs syncKey="api">
        <TabItem label="Svelte">
          <Code lang="svelte" title="SimpleShadow.svelte" code={simpleShadowSvelte} />
        </TabItem>
        <TabItem label="Web Component">
          <Code lang="html" title="SimpleShadow.html" code={simpleShadowWebComponent} />
        </TabItem>
      </Tabs>
    </div>
  </TabItem>
  <TabItem label="Neon">
    <div class="ml-4">
      <Tabs syncKey="api">
        <TabItem label="Svelte">
          <Code lang="svelte" title="NeonShadow.svelte" code={neonShadowSvelte} />
        </TabItem>
        <TabItem label="Web Component">
          <Code lang="html" title="NeonShadow.html" code={neonShadowWebComponent} />
        </TabItem>
      </Tabs>
    </div>
  </TabItem>
</Tabs>

## Breakdown

Here's a breakdown of a simple custom shadow, with each part and how it works.

<Steps>

1. First we need to call the component and apply the `shadow` prop to enable the dynamic shadow.

   <Tabs syncKey="api">
     <TabItem label="Svelte">
       <Code lang="svelte" code={'<HoverTilt class="simple-card" shadow> ... </HoverTilt>'} />
     </TabItem>
     <TabItem label="Web Component">
       <Code lang="html" code={'<hover-tilt class="simple-card" shadow> ... </hover-tilt>'} />
     </TabItem>
   </Tabs>

   This tells the component to render the shadow layer and emit the necessary CSS variables.

2. Then we need to create a CSS selector to target the container of the `<HoverTilt />` component.

   <Tabs syncKey="api">
     <TabItem label="Svelte">
       <Code lang="css" code={`:global(.simple-card) {/* ... */}`} />
     </TabItem>
     <TabItem label="Web Component">
       <Code lang="css" code={`.simple-card::part(container) {/* ... */}`} />
     </TabItem>
   </Tabs>

   We target the container of the `<HoverTilt />` component with the `:global()` selector in Svelte, or the `::part(container)` selector in Web Component.

3. Next we assign the custom shadow to the `--hover-tilt-custom-shadow` CSS variable.

   <Tabs syncKey="api">
     <TabItem label="Svelte">
       <Code lang="css" code={steps3Svelte} />
     </TabItem>
     <TabItem label="Web Component">
       <Code lang="css" code={steps3WebComponent} />
     </TabItem>
   </Tabs>

   This variable will be used to override the default shadow.

4. To make the shadow move around dynamically based on the tilt effect, we use the `--shadow-x` and `--shadow-y` variables.

   <Code lang="css" code={cssShadowSyntax} />

   When the component has no tilt applied _(either inactive, or the user has perfect centering of the pointer)_, then
   the `--shadow-x` and `--shadow-y` variables will be `0`, so a shadow offset of `calc(0 * 10px)` will be `0px`.

   But if the user tilts in the negative `x` direction, then `--shadow-x` will be `-1`, so a shadow offset of `calc(-1 * 10px)` will be `-10px`.
   Likewise when tilted in the positive `x` direction, then `--shadow-x` will be `1`, so a shadow offset of `calc(1 * 10px)` will be `10px`.

5. Lastly we have access to the `--hover-tilt-opacity` variable, which is a value between `0` and `1` that represents the opacity of the shadow based on whether the component is active or not.

   <Code lang="css" code={cssShadowOpacitySyntax} />

   This will give the shadow a `0.2 (20%)` opacity when the component is inactive, and a `0.7 (20% + 50%)` opacity when the component is active.

</Steps>

### Complete beakdown code

And so the final (basic) custom shadow implementation looks like this;

<Tabs syncKey="api">
  <TabItem label="Svelte">
    <Code lang="css" code={steps4Svelte} />
  </TabItem>
  <TabItem label="Web Component">
    <Code lang="css" code={steps4WebComponent} />
  </TabItem>
</Tabs>

This probably looks a little daunting and complex at first, but if you have experience with CSS `calc()` and `var()` functions, it should be relatively straightforward.

<Aside type="tip">
  It's generally easier to create a static shadow first in the style you want, and then replace each part of it with the
  CSS variables needed to make it dynamic!
</Aside>

## List of variables available

These variables are available to customise the shadow appearance / position.

They can also be used inside the content slot to customise the way your content reacts
to the hover-tilt interactions!

### Settable by you

You can set these variables to override the default shadow with your own shadow.

<PropTable columns={['Variable', 'Description']}>
  <tr>
    <td>`--hover-tilt-custom-shadow`</td>
    <td>Set this to override the default shadow with your own shadow.</td>
  </tr>
</PropTable>

### Set by the component

The component will set these variables to control the shadow appearance / position. You may consume these in the `--hover-tilt-custom-shadow` variable.

The variables are [exposed via `::slotted(*)`](https://developer.mozilla.org/en-US/docs/Web/CSS/::slotted) so that they can be picked up by your slotted content to customise the way your content reacts to the hover-tilt interactions!

<PropTable columns={['Variable', 'Description']}>
  <tr>
    <td>`--shadow-x`</td>
    <td>The current horizontal offset of the shadow based on the tilt effect.</td>
  </tr>
  <tr>
    <td>`--shadow-y`</td>
    <td>The current vertical offset of the shadow based on the tilt effect.</td>
  </tr>
  <tr>
    <td class="whitespace-nowrap">`--shadow-y`</td>
    <td class="text-sm">The current vertical offset of the shadow based on the tilt effect.</td>
  </tr>
  <tr>
    <td class="whitespace-nowrap">`--hover-tilt-shadow-blur`</td>
    <td class="text-sm">Matches the `shadowBlur` prop.</td>
  </tr>
  <tr>
    <td class="whitespace-nowrap">`--hover-tilt-opacity`</td>
    <td class="text-sm">The opacity of the shadow based on whether the component is active or not.</td>
  </tr>
  <tr>
    <td class="whitespace-nowrap">`--hover-tilt-scale`</td>
    <td class="text-sm">The current scale of the component.</td>
  </tr>
</PropTable>

See all the positional variables available in the [Options â†’ CSS](/options/css/#css-custom-properties) page.
